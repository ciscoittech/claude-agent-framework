# /dev-docs Command

## Purpose
Create comprehensive dev docs (plan/context/tasks) for large tasks to prevent Claude from "losing the plot" during implementation. Essential for multi-session work and complex features.

## Usage
```
/dev-docs "feature description"
/dev-docs
```

If no description provided, will look for an accepted plan from planning mode.

## When to Use

### Use Dev Docs When:
- âœ… Multi-step features (>3 tasks)
- âœ… Complex implementations requiring research
- âœ… Work spanning multiple sessions
- âœ… Before exiting planning mode with accepted plan
- âœ… Cross-service/repo changes
- âœ… When you'll need to compact context mid-implementation

### Skip Dev Docs When:
- âŒ Single file changes
- âŒ Simple bug fixes
- âŒ Trivial updates
- âŒ Well-understood, quick tasks

## What Gets Created

This command creates a task directory with three essential files:

```
~/dev/active/[task-name]/
â”œâ”€â”€ [task-name]-plan.md      # Comprehensive implementation plan
â”œâ”€â”€ [task-name]-context.md   # Key decisions and file locations
â””â”€â”€ [task-name]-tasks.md     # Checklist for tracking progress
```

### Plan File (`-plan.md`)
**Purpose**: Complete implementation roadmap

**Contains**:
- Executive summary
- Phases with specific tasks
- Technical approach and architecture decisions
- Testing strategy
- Risks and mitigations
- Success criteria

**Generated By**: strategic-plan-architect agent

### Context File (`-context.md`)
**Purpose**: Critical information that must not be lost

**Contains**:
- Key files and their locations
- Important decisions made during planning
- Technical constraints discovered
- External dependencies
- Integration points
- Environment variables needed
- Configuration changes required

**Updated**: As implementation progresses

### Tasks File (`-tasks.md`)
**Purpose**: Concrete checklist for progress tracking

**Contains**:
- [ ] All tasks from the plan in checkbox format
- [ ] Grouped by phase
- [ ] With acceptance criteria
- [ ] Marked complete as you go

**Updated**: Frequently during implementation

## Workflow

### Step 1: Gather Input
- If in planning mode: Use the accepted plan
- If description provided: Create plan first
- If no input: Ask user for details

### Step 2: Create Comprehensive Plan
- Launch strategic-plan-architect agent
- Research codebase thoroughly
- Create detailed implementation plan
- Include all phases, tasks, risks

### Step 3: Extract Context
Analyze plan and extract:
- File locations discovered
- Patterns identified
- Key decisions made
- Constraints found

### Step 4: Create Task Checklist
Convert plan phases into:
- Actionable checkbox items
- Grouped by phase
- With clear acceptance criteria

### Step 5: Create Directory & Files
```bash
mkdir -p ~/dev/active/[task-name]/
# Write all three files
```

### Step 6: Report to User
Show:
- File locations
- Next steps
- Reminder to update docs as you go

## Example Output

```markdown
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ DEV DOCS CREATED
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Task: user-authentication-system

Files Created:
  ğŸ“„ ~/dev/active/user-authentication-system/user-authentication-system-plan.md
  ğŸ“„ ~/dev/active/user-authentication-system/user-authentication-system-context.md
  â˜‘ï¸  ~/dev/active/user-authentication-system/user-authentication-system-tasks.md

Summary:
  - 4 phases
  - 12 tasks
  - Estimated 4-6 hours
  - Risk level: High

Next Steps:
  1. Review the plan carefully
  2. Start with Phase 1
  3. Update tasks.md as you complete each item
  4. Run /dev-docs-update before compacting context

ğŸ“Œ These files ensure you never lose track, even across
   multiple sessions and context compactions.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

## Implementation Details

### Agent Used
- **strategic-plan-architect**: Creates the comprehensive plan

### Templates
Located in `.claude-library/workflows/dev-docs/templates/`:
- `plan-template.md`: Structure for plan
- `context-template.md`: Structure for context
- `tasks-template.md`: Structure for tasks

### File Naming
- Task name: lowercase-with-hyphens
- All files prefixed with task name
- Extension: `.md` (markdown)

## Integration with Planning Mode

**Best Practice Workflow**:
1. User requests complex feature
2. Enter planning mode
3. Research and create plan
4. User reviews and approves plan
5. Exit planning mode
6. **IMMEDIATELY** run `/dev-docs` to preserve the plan
7. Begin implementation with confidence

This prevents the frustration of:
- Losing the plan after exiting planning mode
- Forgetting key decisions mid-implementation
- Claude drifting from the original approach
- Wasting time on wrong paths

## Context Preservation

These files are your **safety net**:

- **Before compaction**: Run `/dev-docs-update` to capture latest state
- **After compaction**: Load the dev docs to resume exactly where you left off
- **Mid-implementation**: Reference context.md for key decisions
- **Progress tracking**: Check off tasks.md items

## Success Indicators

You know dev docs are working when:
- âœ… Implementation follows the plan
- âœ… No "What was I doing?" moments
- âœ… Context compaction doesn't lose track
- âœ… Tasks are completed systematically
- âœ… User doesn't need to re-explain the goal

## Related Commands

- **/dev-docs-update**: Update docs before compacting context
- Planning mode: Create the initial plan
- **strategic-plan-architect** agent: Deep planning specialist

## Configuration

Settings in REGISTRY.json:
```json
{
  "dev_docs": {
    "enabled": true,
    "workflow_path": ".claude-library/workflows/dev-docs/",
    "active_docs_path": "~/dev/active/",
    "archive_docs_path": "~/dev/archive/",
    "auto_suggest_complex_tasks": true,
    "complexity_threshold": 4
  }
}
```

## Archive on Completion

When task is fully complete:
```bash
mv ~/dev/active/[task-name]/ ~/dev/archive/
```

Keeps active directory clean while preserving history.

---

**Remember**: The best developers plan before coding. Dev docs make that plan persistent and actionable.

**You wouldn't hire a builder who starts without blueprints. Don't let Claude code without dev docs.**
